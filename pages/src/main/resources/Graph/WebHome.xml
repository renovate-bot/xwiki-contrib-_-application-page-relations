<?xml version="1.0" encoding="UTF-8"?>

<!--
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
 *
 * This software is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this software; if not, write to the Free
 * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
 * 02110-1301 USA, or see the FSF site: http://www.fsf.org.
-->

<xwikidoc version="1.3" reference="PageRelations.WebHome" locale="">
  <web>PageRelations</web>
  <name>WebHome</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1525856842000</creationDate>
  <parent>Main.WebHome</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1532714296000</date>
  <contentUpdateDate>1532713253000</contentUpdateDate>
  <version>1.1</version>
  <title>Page Relations</title>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.0</syntaxId>
  <hidden>false</hidden>
<<<<<<< HEAD
  <content>{{velocity output="false"}}

#macro (panel $title $text $icon)
  (% class="panel panel-default" %)(((
    (% class="panel-heading text-center"%)(((
      $title
    )))
    (% class="panel-body" %)(((
      $text
    )))
  )))
#end

<<<<<<< HEAD
#macro (list $entries)
  #set ($list = [])
  #foreach ($entry in $entries)
    #set ($page = $xwiki.getDocument($entry).translatedDocument)
    #set ($reference = $services.model.resolveDocument($entry))
    #set ($treference = $services.model.createDocumentReference($entry, $xcontext.locale))
    #if ($xwiki.exists($treference))
      #set ($reference = $treference)
    #end
    #set ($page = $xwiki.getDocument($reference))
    #set ($discard = $list.add([$page.title, $entry]))
  #end
=======
#set ($typesOrRelations = []) #set ($types = '') #set ($root = $services.graph.getNamespace('root'))
#set ($typeReference = $services.model.resolveDocument("${root}.Type"))
#set ($isAReference = $services.model.resolveDocument("${root}.IsA"))
#set ($entries = $services.graph.getDirectPredecessors($typeReference, $isAReference))
#foreach ($entry in $entries)
  #set ($page = $xwiki.getDocument($entry))
  #set ($types = "$types${escapetool.newline}* [[$page.title&gt;&gt;$entry]]")
  #set ($discard = $typesOrRelations.add($entry))
>>>>>>> parent of d6bfffb... MISC: add FR pages
#end

#set ($relations = '') #set ($entries = $services.graph.getRelations())
#foreach ($entry in $entries)
  #set ($page = $xwiki.getDocument($entry))
  #set ($relations = "$relations${escapetool.newline}* [[$page.title&gt;&gt;$entry]]")
  #set ($discard = $typesOrRelations.add($entry))
#end

{{/velocity}}

(% style="background-color: #f5f5f5; padding: 1.6em; margin-bottom: 1.5em;" %)(((
The Graph application allows to draw relations between wiki pages. For instance, the relation //has author// can be created to state that page //The Jungle Book// has relation //has author// with page //Rudyard Kipling//. Relations are stored in the wiki as any other page, with the only specificity that they have relation //is a// with the //Relation// page. The connections of each wiki page can be browsed using the widget that should show up below the title, allowing also to add new connections.
)))

{{velocity}}
(% class="row" %)(((
  (% class="col-md-4 col-xs-12" %)(((
    #panel('Documentation and quick links', "
      * [[Documentation]]
      * [[Demo&gt;&gt;WikidataImporter]]
      * [[Graph search&gt;&gt;Search]]
      * [[Administration&gt;&gt;SolrConsole]]
      ")
  )))
  (% class="col-md-4 col-xs-12" %)(((
    #panel('Types', $types)
  )))
  (% class="col-md-4 col-xs-12" %)(((
    #panel('Relations', $relations)
  )))
)))
=======
  <content>{{velocity}}
#set ($columnsProperties = {
  'doc.title': {"link":"view"},
  'page': {},
  'doc.location': {"html":true},
  'doc.date': {},
  'doc.author': {"link":"author"},
  '_actions': {"sortable":false,"filterable":false,"html":true,"actions":["edit","delete"]}
})
#set ($options = {
  'className': 'PageRelations.Code.PageRelationClass',
  'translationPrefix': 'pageRelations.livetable.',
  'tagCloud': true,
  'rowCount': 15,
  'maxPages': 10,
  'selectedColumn': 'doc.title',
  'defaultOrder': 'asc'
})
#set ($columns = ['doc.title', 'page', 'doc.location', 'doc.date', 'doc.author', '_actions'])
#livetable('relations' $columns $columnsProperties $options)
#set($docextras = [])
>>>>>>> parent of 917b84d... MISC: rename XClasses and other XWiki pages
{{/velocity}}

</content>
</xwikidoc>
